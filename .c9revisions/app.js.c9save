{"ts":1361496333600,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1361496342713,"patch":[[{"diffs":[[1,"var express = require('express');\nvar app = express();\n"]],"start1":0,"start2":0,"length1":0,"length2":55}]],"length":55,"saved":false}
{"ts":1361496504333,"patch":[[{"diffs":[[0,"ress();\n"],[1,"\npassport.use(new SamlStrategy(\n  {\n    path: '/login/callback',\n    entryPoint: 'https://openidp.feide.no/simplesaml/saml2/idp/SSOService.php',\n    issuer: 'passport-saml'\n  },\n  function(profile, done) {\n    findByEmail(profile.email, function(err, user) {\n      if (err) {\n        return done(err);\n      }\n      return done(null, user);\n    });\n  })\n));\n\napp.post('/login/callback',\n  passport.authenticate('saml', { failureRedirect: '/', failureFlash: true }),\n  function(req, res) {\n    res.redirect('/');\n  }\n);\n\n\napp.get('/login',\n  passport.authenticate('saml', { failureRedirect: '/', failureFlash: true }),\n  function(req, res) {\n    res.redirect('/');\n  }\n);"]],"start1":47,"start2":47,"length1":8,"length2":678}]],"length":725,"saved":false}
{"ts":1361496510092,"patch":[[{"diffs":[[0," })\n"],[-1,"));"],[0,"\n\nap"]],"start1":405,"start2":405,"length1":11,"length2":8}]],"length":722,"saved":false}
{"ts":1361496547930,"patch":[[{"diffs":[[0,"ress();\n"],[1,"var passport = passport();\n\n"],[0,"\npasspor"]],"start1":47,"start2":47,"length1":16,"length2":44},{"diffs":[[0,");\n  })\n"],[-1,"\n"],[1,"});\n  \n  \n  "],[0,"\napp.pos"]],"start1":429,"start2":429,"length1":17,"length2":28}]],"length":761,"saved":false}
{"ts":1361496559282,"patch":[[{"diffs":[[0,"l'\n  },\n"],[1,"  \n"],[0,"  functi"]],"start1":253,"start2":253,"length1":16,"length2":19}]],"length":764,"saved":false}
{"ts":1361499348580,"patch":[[{"diffs":[[0,"();\n"],[-1,"var passport = passport();\n"],[1,"\n\n\n\nvar express = require('express');\nvar app = express();\n\napp.get('/', function(req, res){\n  res.send('hello world');\n});"],[0,"\n\npa"]],"start1":51,"start2":51,"length1":35,"length2":131},{"diffs":[[0,"   res.redirect('/');\n  }\n);"],[1,"\n\n\napp.listen(3000);"]],"start1":832,"start2":832,"length1":28,"length2":48}]],"length":880,"saved":false}
{"ts":1361499408355,"patch":[[{"diffs":[[0,"ess();\n\n"],[1,"var passport = require('passport')\n"],[0,"\n\n\nvar e"]],"start1":48,"start2":48,"length1":16,"length2":51}]],"length":915,"saved":false}
{"ts":1361499414069,"patch":[[{"diffs":[[0,"ssport')"],[1,";"],[0,"\n\n\n\nvar "]],"start1":82,"start2":82,"length1":16,"length2":17}]],"length":916,"saved":false}
{"ts":1361499463977,"patch":[[{"diffs":[[0,"ress');\n"],[-1,"var app = express();\n\n"],[0,"var pass"]],"start1":26,"start2":26,"length1":38,"length2":16},{"diffs":[[0,");\n\n"],[-1,"\n\nvar express = require('express');\n"],[0,"var "]],"start1":67,"start2":67,"length1":44,"length2":8},{"diffs":[[0,"ess();\n\n"],[1,"\n"],[0,"app.get("]],"start1":85,"start2":85,"length1":16,"length2":17}]],"length":859,"saved":false}
{"ts":1361499486933,"patch":[[{"diffs":[[0,");\n\n"],[-1,"passport.use(new SamlStrategy(\n  {\n    path: '/login/callback',\n    entryPoint: 'https://openidp.feide.no/simplesaml/saml2/idp/SSOService.php',\n    issuer: 'passport-saml'\n  },\n  \n  function(profile, done) {\n    findByEmail(profile.email, function(err, user) {\n      if (err) {\n        return done(err);\n      }\n      return done(null, user);\n    });\n  })\n});\n  \n  "],[0,"\n  \n"]],"start1":155,"start2":155,"length1":373,"length2":8}]],"length":494,"saved":false}
{"ts":1361499558923,"patch":[[{"diffs":[[0,"ten("],[-1,"3000"],[1,"process.env.PORT"],[0,");"]],"start1":484,"start2":484,"length1":10,"length2":22}]],"length":506,"saved":false}
{"ts":1361499819725,"patch":[[{"diffs":[[0,"');\n  }\n);\n\n"],[1,"passport.use(new SamlStrategy(\n  {\n    path: '/login/callback',\n    entryPoint: 'https://openidp.feide.no/simplesaml/saml2/idp/SSOService.php',\n    issuer: 'passport-saml'\n  },\n  function(profile, done) {\n    findByEmail(profile.email, function(err, user) {\n      if (err) {\n        return done(err);\n      }\n      return done(null, user);\n    });\n  })\n));\n\n\n"],[0,"\napp.listen("]],"start1":464,"start2":464,"length1":24,"length2":383}]],"length":865,"saved":false}
{"ts":1361499926065,"patch":[[{"diffs":[[0," });\n  }"],[-1,")"],[0,"\n));\n\n\n\n"]],"start1":819,"start2":819,"length1":17,"length2":16}]],"length":864,"saved":false}
{"ts":1361500116703,"patch":[[{"diffs":[[0,"ss')"],[-1,";\nvar passport = require('passport"],[1,"\n    , passport = require('passport')\n    , util = require('util')\n    , SamlStrategy = require('../../lib/passport-saml/index').Strategy\n    , fs = require('fs"],[0,"');\n"]],"start1":28,"start2":28,"length1":42,"length2":168}]],"length":990,"saved":false}
{"ts":1361500122965,"patch":[[{"diffs":[[0,"'fs');\n\n"],[1,"\n"],[0,"var app "]],"start1":189,"start2":189,"length1":16,"length2":17}]],"length":991,"saved":false}
{"ts":1361500313095,"patch":[[{"diffs":[[0,"le, done) {\n"],[1,"    console.log(\"Auth with\", profile);\n    if (!profile.email) {\n      return done(new Error(\"No email found\"), null);\n    }\n    // asynchronous verification, for effect...\n    process.nextTick(function () {\n  "],[0,"    findByEm"]],"start1":796,"start2":796,"length1":24,"length2":234},{"diffs":[[0,"er) {\n      "],[1,"  "],[0,"if (err) {\n "]],"start1":1065,"start2":1065,"length1":24,"length2":26},{"diffs":[[0," if (err) {\n"],[1,"  "],[0,"        retu"]],"start1":1078,"start2":1078,"length1":24,"length2":26},{"diffs":[[0,"err);\n      "],[1,"  "],[0,"}\n"],[1,"        if (!user) {\n          // \"Auto-registration\"\n          users.push(profile);\n          return done(null, profile);\n        }\n  "],[0,"      return"]],"start1":1112,"start2":1112,"length1":26,"length2":163},{"diffs":[[0,"ull, user);\n"],[1,"      })\n"],[0,"    });\n  }\n"]],"start1":1282,"start2":1282,"length1":24,"length2":33},{"diffs":[[0,"  }\n"],[1,""],[0,"));\n\n\n"],[-1,"\n"],[0,"app."]],"start1":1311,"start2":1311,"length1":15,"length2":14}]],"length":1350,"saved":false}
{"ts":1361500344424,"patch":[[{"diffs":[[0,"express();\n\n"],[1,"function findByEmail(email, fn) {\n  for (var i = 0, len = users.length; i < len; i++) {\n    var user = users[i];\n    if (user.email === email) {\n      return fn(null, user);\n    }\n  }\n  return fn(null, null);\n}\n\n\n\n"],[0,"\napp.get('/'"]],"start1":208,"start2":208,"length1":24,"length2":238}]],"length":1564,"saved":false}
{"ts":1361500374967,"patch":[[{"diffs":[[0,"ess();\n\n"],[1,"var users = [\n    { id: 1, givenName: 'bob', email: 'bob@example.com' }\n  , { id: 2, givenName: 'joe', email: 'joe@example.com' }\n];\n\n"],[0,"function"]],"start1":212,"start2":212,"length1":16,"length2":150},{"diffs":[[0,"l);\n}\n\n\n"],[-1,"\n\n"],[0,"app.get("]],"start1":559,"start2":559,"length1":18,"length2":16}]],"length":1696,"saved":false}
{"ts":1361500523489,"patch":[[{"diffs":[[0,"re('"],[-1,"../.."],[1,"/node_modules/passport-saml"],[0,"/lib"]],"start1":125,"start2":125,"length1":13,"length2":35}]],"length":1718,"saved":false}
{"ts":1361500536203,"patch":[[{"diffs":[[0,"equire('"],[-1,"/"],[0,"node_mod"]],"start1":121,"start2":121,"length1":17,"length2":16}]],"length":1717,"saved":false}
{"ts":1361500567055,"patch":[[{"diffs":[[0,"equire('"],[1,"../"],[0,"node_mod"]],"start1":121,"start2":121,"length1":16,"length2":19}]],"length":1720,"saved":false}
{"ts":1361500682406,"patch":[[{"diffs":[[0,"re('"],[-1,"../node_modules/passport-saml/lib/passport-saml/index').S"],[1,"s"],[0,"trategy"],[1,"')"],[0,"\n   "]],"start1":125,"start2":125,"length1":72,"length2":18}]],"length":1666,"saved":false}
{"ts":1361500766361,"patch":[[{"diffs":[[0,"re('"],[-1,"s"],[1,"./function() {\n        \n    }/passport-saml/lib/passport-saml/index').S"],[0,"trategy"],[-1,"')"],[0,"\n   "]],"start1":125,"start2":125,"length1":18,"length2":86}]],"length":1734,"saved":false}
{"ts":1361500769393,"patch":[[{"diffs":[[0,"('./"],[-1,"function() {\n        \n    }"],[1,"node_modules"],[0,"/pas"]],"start1":127,"start2":127,"length1":35,"length2":20}]],"length":1719,"saved":false}
{"ts":1361500904294,"patch":[[{"diffs":[[0,"s://"],[-1,"openidp.feide.no/simplesaml/saml2/idp/SSOService.php"],[1,"app.onelogin.com/trust/saml2/http-post/sso/90575"],[0,"',\n "]],"start1":1057,"start2":1057,"length1":60,"length2":56}]],"length":1715,"saved":false}
{"ts":1361501071302,"patch":[[{"diffs":[[0,"quire('."],[-1,"/"],[0,"node_mod"]],"start1":122,"start2":122,"length1":17,"length2":16}]],"length":1714,"saved":false}
{"ts":1361501259821,"patch":[[{"diffs":[[0,"rt-saml'"],[1,",\n    cert: 'MIIEHjCCAwagAwIBAgIBATANBgkqhkiG9w0BAQUFADBnMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEVMBMGA1UEBwwMU2FudGEgTW9uaWNhMREwDwYDVQQKDAhPbmVMb2dpbjEZMBcGA1UEAwwQYXBwLm9uZWxvZ2luLmNvbTAeFw0xMjEwMDgxNzM2MTlaFw0xNzEwMDgxNzM2MTlaMGcxCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRUwEwYDVQQHDAxTYW50YSBNb25pY2ExETAPBgNVBAoMCE9uZUxvZ2luMRkwFwYDVQQDDBBhcHAub25lbG9naW4uY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwaE64QDO2Ytq77nE0rJguLqF02RJEx3LJ0r+iUbfBw64v916JJ/SYUHIA3OX4WB1ZSimIfkU3/BBNozpiRy4Lh3otZdJ2R9FtI/jM7ELiLmaRCpzRBw+rIf1qWs5OA1hyfgOaonP6w1dpW8x2TcQSZcjZRfEGOgu54bhnIdAhecQvXteIvpFovJmpupSO/bNKw9K+CxhM4zI/NavHM+CIPw9NGKz2yZm8NqA8nSTP3jIumf7lk2rZNVn+2P0B9oEBWOX+9/1Hn2qYuOpA+Yo5lCxiVrq0M6fQvJkdcfPiKmmSAR2W90yw8sAlck0dkpyzkbmm4plQ0CuqwhjgdgZ5QIDAQABo4HUMIHRMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFHPi+apxDIHUh6E9d/wFp/petkXlMIGRBgNVHSMEgYkwgYaAFHPi+apxDIHUh6E9d/wFp/petkXloWukaTBnMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEVMBMGA1UEBwwMU2FudGEgTW9uaWNhMREwDwYDVQQKDAhPbmVMb2dpbjEZMBcGA1UEAwwQYXBwLm9uZWxvZ2luLmNvbYIBATAOBgNVHQ8BAf8EBAMCBPAwDQYJKoZIhvcNAQEFBQADggEBAFaSDjtbz6FVhWuFVOdnlcuZNtbcMB9tSbf+6YnJf4B0eqVqGk5HBtBOax3vNAQG12w0rwbQg+6lDntSaqhWYbKdRj0y+N3aNloH8T88GqFm4Mr9U0zwEIOxXPMnkw6SNxGkYbz8ut+7lpMar2R/YP+1kzuIjBWPmGjn47GXNduXzJbm0jmiHXImRTeLKFoDveYBePi/cAJltY/S6Su4cwjrChDs7kjdzO6vc94iFmfUJyVTA+AMLJYHKN/qClj5xkAvlYNYe+hGjYlOfuSBfb921CJ1hICUy6iHfC1gSBlUN3FtQuPTVRyPY93KN1+3i4DlUPL4UsN/Fl10HvVOC+4='"],[0,"\n  },\n  "]],"start1":1130,"start2":1130,"length1":16,"length2":1442}]],"length":3140,"saved":false}
{"ts":1361501277211,"patch":[[{"diffs":[[0,"='\n  },\n"],[1,"  \n"],[0,"  functi"]],"start1":2562,"start2":2562,"length1":16,"length2":19}]],"length":3143,"saved":false}
{"ts":1361501291179,"patch":[[{"diffs":[[0,"quire('."],[1,"/"],[0,"node_mod"]],"start1":122,"start2":122,"length1":16,"length2":17}]],"length":3144,"saved":false}
{"ts":1361501450968,"patch":[[{"diffs":[[0,"com/"],[-1,"trust/saml2/http-post/sso"],[1,"start"],[0,"/905"]],"start1":1074,"start2":1074,"length1":33,"length2":13}]],"length":3124,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361509458607,"patch":[[{"diffs":[[0,"-saml',\n"],[1,"    protocol: 'https://'\n"],[0,"    cert"]],"start1":1113,"start2":1113,"length1":16,"length2":41}]],"length":3149,"saved":false}
{"ts":1361509469051,"patch":[[{"diffs":[[0,"ttps://'"],[1,"."],[0,"\n    cer"]],"start1":1137,"start2":1137,"length1":16,"length2":17}]],"length":3150,"saved":false}
{"ts":1361509472601,"patch":[[{"diffs":[[0,"ttps://'"],[-1,"."],[1,","],[0,"\n    cer"]],"start1":1137,"start2":1137,"length1":17,"length2":17}]],"length":3150,"saved":false}
{"ts":1361509823426,"patch":[[{"diffs":[[0,"l: 'http"],[-1,"s"],[0,"://',\n  "]],"start1":1132,"start2":1132,"length1":17,"length2":16}]],"length":3149,"saved":false}
{"ts":1361509904583,"patch":[[{"diffs":[[0,"l: 'http"],[1,"s"],[0,"://',\n  "]],"start1":1132,"start2":1132,"length1":16,"length2":17}]],"length":3150,"saved":false}
{"ts":1361510196605,"patch":[[{"diffs":[[0,"('fs');\n"],[1,"var https = require('https');\nvar http = require('http');\n"],[0,"\n\nvar ap"]],"start1":207,"start2":207,"length1":16,"length2":74}]],"length":3204,"saved":false}
{"ts":1361510295876,"patch":[[{"diffs":[[0,"v.PORT);"],[1,"\n\nhttp.createServer(app).listen(80);\nhttps.createServer(options, app).listen(443);\n\n\n"]],"start1":3196,"start2":3196,"length1":8,"length2":93}]],"length":3289,"saved":false}
{"ts":1361510357157,"patch":[[{"diffs":[[0,";\n\n\n"],[-1,"app.listen(process.env.PORT);"],[0,"\n\nht"]],"start1":3171,"start2":3171,"length1":37,"length2":8}]],"length":3260,"saved":false}
{"ts":1361510393787,"patch":[[{"diffs":[[0,"));\n\n\n\n\n"],[1,"//"],[0,"http.cre"]],"start1":3169,"start2":3169,"length1":16,"length2":18}]],"length":3262,"saved":false}
{"ts":1361510411734,"patch":[[{"diffs":[[0,"ten("],[-1,"443"],[1,"process.env.PORT"],[0,");\n\n"]],"start1":3250,"start2":3250,"length1":11,"length2":24}]],"length":3275,"saved":false}
{"ts":1361510888975,"patch":[[{"diffs":[[0," }\n));\n\n"],[1,"var options = {\n  key: fs.readFileSync('server.key'),\n  cert: fs.readFileSync('server.cert')\n};"],[0,"\n\n\n//htt"]],"start1":3166,"start2":3166,"length1":16,"length2":111}]],"length":3370,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361511339448,"patch":[[{"diffs":[[0,"xpress')"],[-1,"\n    ,"],[1,";\nvar"],[0," passpor"]],"start1":24,"start2":24,"length1":22,"length2":21},{"diffs":[[0,"ssport')"],[-1,"\n    ,"],[1,";\nvar"],[0," util = "]],"start1":60,"start2":60,"length1":22,"length2":21},{"diffs":[[0,"('util')"],[-1,"\n    ,"],[1,";\nvar"],[0," SamlStr"]],"start1":88,"start2":88,"length1":22,"length2":21},{"diffs":[[0,"tegy"],[-1,"\n    ,"],[1,";\nvar"],[0," fs "]],"start1":185,"start2":185,"length1":14,"length2":13},{"diffs":[[0,"adFileSync('"],[1,"./"],[0,"server.key')"]],"start1":3202,"start2":3202,"length1":24,"length2":26},{"diffs":[[0,"leSync('"],[1,"./"],[0,"server.c"]],"start1":3247,"start2":3247,"length1":16,"length2":18}]],"length":3374,"saved":false}
{"ts":1361511367266,"patch":[[{"diffs":[[0,"server.c"],[-1,"e"],[0,"rt')\n};\n"]],"start1":3257,"start2":3257,"length1":17,"length2":16}]],"length":3373,"saved":false}
{"ts":1361511398195,"patch":[[{"diffs":[[0,"app."],[-1,"pos"],[1,"ge"],[0,"t('/"]],"start1":713,"start2":713,"length1":11,"length2":10}]],"length":3372,"saved":false}
{"ts":1361511430038,"patch":[[{"diffs":[[0,");\n\n\n  \napp."],[-1,"ge"],[1,"pos"],[0,"t('/login/ca"]],"start1":705,"start2":705,"length1":26,"length2":27}]],"length":3373,"saved":false}
{"ts":1361511577032,"patch":[[{"diffs":[[0,";\n});\n\n\n"],[1,"/*"],[0,"  \napp.p"]],"start1":702,"start2":702,"length1":16,"length2":18},{"diffs":[[0,"\n  }\n);\n"],[1,"*/"],[0,"\n\napp.ge"]],"start1":867,"start2":867,"length1":16,"length2":18}]],"length":3377,"saved":false}
{"ts":1361511659389,"patch":[[{"diffs":[[0,"com/"],[-1,"start"],[1,"trust/saml2/http-post/sso"],[0,"/905"]],"start1":1132,"start2":1132,"length1":13,"length2":33}]],"length":3397,"saved":false}
{"ts":1361511672047,"patch":[[{"diffs":[[0,";\n\n\n"],[-1,"/*"],[0,"  \na"]],"start1":706,"start2":706,"length1":10,"length2":8},{"diffs":[[0,"\n);\n"],[-1,"*/"],[0,"\n\nap"]],"start1":869,"start2":869,"length1":10,"length2":8}]],"length":3393,"saved":false}
{"ts":1361511745381,"patch":[[{"diffs":[[0,"});\n\n\n  "],[1,"/*"],[0,"\napp.pos"]],"start1":704,"start2":704,"length1":16,"length2":18},{"diffs":[[0,"\n  }\n);\n"],[1,"*/"],[0,"\n\napp.ge"]],"start1":867,"start2":867,"length1":16,"length2":18}]],"length":3397,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361512026979,"patch":[[{"diffs":[[0,"ten("],[-1,"process.env.PORT"],[1,"443"],[0,");\n\n"]],"start1":3372,"start2":3372,"length1":24,"length2":11}]],"length":3384,"saved":false}
{"ts":1361512105327,"patch":[[{"diffs":[[0,"ess.env."],[1,"SSL"],[0,"PORT);\n\n"]],"start1":3380,"start2":3380,"length1":16,"length2":19}]],"length":3400,"saved":false}
{"ts":1361512376572,"patch":[[{"diffs":[[0,"env."],[-1,"SSL"],[0,"PORT"],[1,", process.env.IP"],[0,");\n\n"]],"start1":3384,"start2":3384,"length1":15,"length2":28}]],"length":3413,"saved":false}
{"ts":1361514324653,"patch":[[{"diffs":[[0,";\n\n\n"],[-1,"  /*"],[0,"\napp"]],"start1":706,"start2":706,"length1":12,"length2":8},{"diffs":[[0,"\n);\n"],[-1,"*/"],[0,"\n\nap"]],"start1":867,"start2":867,"length1":10,"length2":8}]],"length":3407,"saved":false}
{"ts":1361514417070,"patch":[[{"diffs":[[0,";\n});\n\n\n"],[1,"/*"],[0,"\napp.pos"]],"start1":702,"start2":702,"length1":16,"length2":18},{"diffs":[[0,"\n  }\n);\n"],[1,"*/"],[0,"\n\napp.ge"]],"start1":865,"start2":865,"length1":16,"length2":18}]],"length":3411,"saved":false}
{"ts":1361514505429,"patch":[[{"diffs":[[0,"t')\n};\n\n"],[1,"app.listen(process.env.PORT, process.env.IP);"],[0,"\n//http."]],"start1":3288,"start2":3288,"length1":16,"length2":61}]],"length":3456,"saved":false}
{"ts":1361514508121,"patch":[[{"diffs":[[0,"en(80);\n"],[1,"//"],[0,"https.cr"]],"start1":3371,"start2":3371,"length1":16,"length2":18}]],"length":3458,"saved":false}
